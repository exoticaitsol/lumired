var $lockMZUpdate=!1,$firstImageIsVideo=!1;mzOptions=mzOptions||{},mzOptions.onUpdate=function(){$lockMZUpdate||mtHighlightActiveSelector(),$lockMZUpdate=!1};var mtZoomIsReady=!1;function mtIfZoomReady(i){mtZoomIsReady?i():setTimeout((function(){mtIfZoomReady(i)}),250)}function mtInitSelectors(i){jQuery(i).on(mzOptions&&mzOptions.selectorTrigger&&"hover"==mzOptions.selectorTrigger?"mouseover click touchend":"click touchend",(function(i){var e,t,r=jQuery(this);if(1==(e=jQuery(".active-magic-slide iframe")).length&&e.attr("src",e.attr("src").replace(/(.*)\?.*/gm,"$1")),1==(t=jQuery(".active-magic-slide video")).length&&t.get(0).pause(),jQuery(".MagicToolboxContainer .MagicToolboxSlide").removeClass("active-magic-slide"),jQuery('.MagicToolboxContainer .MagicToolboxSlide[data-slide-id="'+r.attr("data-slide-id")+'"]').addClass("active-magic-slide"),jQuery(".MagicToolboxContainer .MagicToolboxSelectorsContainer a").removeClass("active-magic-selector mz-thumb-selected"),r.addClass("active-magic-selector mz-thumb-selected"),"spin"==r.attr("data-slide-id")){var a=window.document.createEvent("UIEvents");a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a),void 0===jQuery(".Sirv").attr("data-started")&&(Sirv.start(),jQuery(".Sirv").attr("data-started",1))}if((e=jQuery(".active-magic-slide iframe")).length){var o=e.attr("data-video-options");e.attr("src",e.attr("src").replace(/(.*)\?.*/gm,"$1")+"?"+o)}1==(t=jQuery(".active-magic-slide video")).length&&t.get(0).play(),i.preventDefault()}))}function mtInitVideoSelectors(){jQuery(".MagicToolboxSlides div[data-video-url]").each((function(i){if(!jQuery(this).data("processed")){var e,t,r,a=jQuery(this).attr("data-video-url").replace(/https\:\/\/player\.vimeo\.com\/video\/([0-9]{1,})/gm,"https://vimeo.com/$1");if(r=/https?:\/\/youtu\.be\/([^\/]{1,})\/?/gm.exec(a))e=r[1],t="youtube";else if(r=/https?:\/\/www\.youtube\.com\/watch\?v=(.*?)(&|$).*/gm.exec(a))e=r[1],t="youtube";else if(r=/https?:\/\/www\.youtube\.com\/(?:embed|shorts)\/(.{1,})/gm.exec(a))e=r[1],t="youtube";else if(r=/https?:\/\/vimeo\.com\/(.{1,})/gm.exec(a))e=r[1],t="vimeo";else if(r=/https\:\/\/.*?\.vids\.io\/videos\/(.*?)\/.*/gm.exec(a))e=r[1],t="sproutvideo";else if(r=/https\:\/\/sproutvideo\.com\/videos\/(.*?)\/*$/gm.exec(a))e=r[1],t="sproutvideo";else(r=/https:\/\/[a-z]{1,}.sproutvideo\.com\/embed\/(.*?)\/.*?$/gm.exec(a))&&(e=r[1],t="sproutvideo_embed");"youtube"==t?jQuery(this).html('<div class="magic-video-container"><iframe src="https://www.youtube.com/embed/'+e+'" frameborder="0" allowfullscreen></iframe></div>'):"vimeo"==t?jQuery(this).html('<div class="magic-video-container"><iframe src="https://player.vimeo.com/video/'+e+'" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe></div>'):"sproutvideo"==t?(jQuery(this).html('<div class="magic-video-container"><iframe src="" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'),jQuery.ajax({slide_id:jQuery(this).attr("data-slide-id"),video_url:a,url:"https://sproutvideo.com/oembed.json?url=http://sproutvideo.com/videos/"+e,crossDomain:!0,success:function(i,e,t){jQuery('div[data-slide-id="'+this.slide_id+'"] .magic-video-container').html(i.html);var r=jQuery('div[data-slide-id="'+this.slide_id+'"] .magic-video-container').find("iframe"),a="autoPlay=true&volume=0&loop=true&background=true";r.attr("data-video-options",a),r.closest("div").is(":visible")&&r.attr("src",r.attr("src")+"?"+a),jQuery('a[data-slide-id="'+this.slide_id+'"] img').attr("src",i.thumbnail_url).css("max-width","100px").closest("a").show()}})):"sproutvideo_embed"==t?(jQuery(this).html('<div class="magic-video-container"><iframe src="'+a+'?autoPlay=true&volume=0&loop=true&background=true" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'),jQuery('a[data-slide-id="'+jQuery(this).attr("data-slide-id")+'"] img').closest("a").show()):jQuery('div[data-slide-id="'+jQuery(this).attr("data-slide-id")+'"],a[data-slide-id="'+jQuery(this).attr("data-slide-id")+'"]').remove()}}))}function mtHighlightActiveSelector(){if("undefined"!=typeof jQuery){jQuery(".MagicToolboxContainer .MagicToolboxSelectorsContainer a").removeClass("active-magic-selector"),jQuery(".MagicToolboxContainer .MagicToolboxSelectorsContainer a.mz-thumb-selected").addClass("active-magic-selector");var i=jQuery(".active-magic-selector").closest(".mcs-item");i.length&&MagicScroll.jump("msc-selectors-container",i.data("item"))}}function mtGetMaxSizes(){var i=$maxHeight=1;return jQuery(".MagicToolboxSelectorsContainer a > img").each((function(){var e=jQuery(this);e.is(":visible")&&($maxHeight=Math.max($maxHeight,e.height()),i=Math.max(i,e.width()))})),{width:i,height:$maxHeight}}function SirvSKUTransform(i){if("undefined"!=typeof SirvSpinsPathTransform&&""!=SirvSpinsPathTransform){var e=new RegExp("^"+SirvSpinsPathTransform+"$","gmsi");return i.replace(e,"$1")}return i}function mtInitSirv(){if("undefined"!=typeof SirvID&&""!=SirvID){SirvProductSKU=SirvProductSKU.replace(/\//gim,"-");var i="https://"+SirvID+".sirv.com/"+SirvSpinsPath.replace(/{product\-id}/g,SirvProductID).replace(/{product\-sku}/g,SirvProductSKU).replace(/{vendor}/g,SirvProductVendor).replace(/{product\-name}/g,SirvProductName);if("undefined"!=typeof SirvSpinOverrides&&void 0!==SirvSpinOverrides[SirvProductID+"-"]&&""!=SirvSpinOverrides[SirvProductID+"-"]&&(i="https://"+SirvID+".sirv.com"+SirvSpinOverrides[SirvProductID+"-"]),"undefined"!=typeof SirvCache&&void 0!==SirvCache[i.replace("https://"+SirvID+".sirv.com/","")]?mtInitSirvIcon(i):"Yes"==SirvUseCache?initMagicScroll():jQuery.ajax({url:i,type:"HEAD",cache:!0,timeout:4e3,error:function(i,e,t){initMagicScroll()},success:function(e,t,r){mtInitSirvIcon(i)}}),Object.keys(SirvVariants).length>1)for(var e in SirvVariants){null==SirvVariantsSKU[e].sku&&(SirvVariantsSKU[e].sku=""),SirvVariantsSKU[e].sku=SirvVariantsSKU[e].sku.replace(/\//gim,"-");var t=SirvSKUTransform(SirvVariantsSKU[e].sku),r="https://"+SirvID+".sirv.com/"+SirvSpinsPath.replace(/{product\-id}/g,e).replace(/{product\-sku}/g,void 0!==SirvVariantsSKU[e].sku&&""!=SirvVariantsSKU[e].sku&&null!=SirvVariantsSKU[e].sku?t.replace("/",""):e).replace(/{vendor}/g,SirvProductVendor).replace(/{product\-name}/g,SirvProductName+"-"+e);if("undefined"!=typeof SirvSpinOverrides&&void 0!==SirvSpinOverrides[SirvProductID+"-"+e]&&""!=SirvSpinOverrides[SirvProductID+"-"+e]&&(r="https://"+SirvID+".sirv.com"+SirvSpinOverrides[SirvProductID+"-"+e]),"undefined"!=typeof SirvCache&&void 0!==SirvCache[r.replace("https://"+SirvID+".sirv.com/","")]){if(SirvVariants[e]=r.replace(/\?callback.*/gm,""),e==currentVariantID){if(SirvSetActiveItem(SirvVariants[currentVariantID]),"first"==SirvSpinPosition)mtShowSirvVariant(currentVariantID);else{mtInitSirvIcon(SirvVariants[e]);SirvMaxHeight>0&&SirvMaxHeight}currentVariantID=0}}else"Yes"==SirvUseCache?SirvVariants[e]=!1:jQuery.ajax({url:r,type:"HEAD",cache:"false",timeout:4e3,spinID:e,error:function(){SirvVariants[this.spinID]=!1},success:function(i){if(SirvVariants[this.spinID]=this.url.replace(/\?callback.*/gm,""),this.spinID==currentVariantID){if(SirvSetActiveItem(SirvVariants[currentVariantID]),"first"==SirvSpinPosition)mtShowSirvVariant(currentVariantID);else{mtInitSirvIcon(SirvVariants[this.spinID]);SirvMaxHeight>0&&SirvMaxHeight}currentVariantID=0}}})}}}function initMagicScroll(){jQuery("#msc-selectors-container").length&&MagicScroll.start()}function mtInitArrows(){jQuery(".MagicToolboxSlides .MagicToolboxSlides-arrow").on("click",(function(i){var e,t,r,a=jQuery(this).closest(".MagicToolboxContainer").find(".MagicToolboxSelectorsContainer"),o=a.find("a.active-magic-selector"),n=!1,s=jQuery("#msc-selectors-container").length,c=jQuery(this).hasClass("magic-next");if(s){if(t=(e=o.parent()).attr("data-item"),!(e=c?e.next():e.prev()).length&&(e=a.find("div[data-item="+t+"]"),!(e=c?e.first().next():e.last().prev()).length&&!(e=c?a.find(".mcs-item:first"):a.find(".mcs-item:last")).length))return void i.preventDefault();n=e.find("a"),r=e.attr("data-item"),r=parseInt(r,10),MagicScroll.jump("msc-selectors-container",r)}else(n=c?o.next("a"):o.prev("a")).length||(n=c?a.find("a:first"):a.find("a:last"));n.length&&(n.trigger("click"),n.hasClass("mz-thumb")&&($lockMZUpdate=!0,MagicZoom.switchTo(jQuery(this).closest(".MagicToolboxContainer").find("a.MagicZoomPlus").attr("id"),n[0]))),i.preventDefault()}))}function SirvSetActiveItem(i){var e=Sirv.viewer.getInstance("#sirv-spin");if(e&&e.isReady()&&null!=e.items()&&e.items().length){for(var t in e.items())e.disableItem(1*t);e.enableItem(i)}else jQuery("#sirv-spin [data-id]").attr("data-disabled","true"),jQuery('[data-id="'+i+'"]').removeAttr("data-disabled")}function mtInitSirvIcon(i){if(!jQuery('a[data-slide-id="spin"]').length){var e="";"gif-overlay"!=SirvIconURL&&"giftwitch-overlay"!=SirvIconURL||(e="spin-overlay-icon"),"gif"!=SirvIconURL&&"gif-overlay"!=SirvIconURL||(SirvIconURL=i+"?image"),"giftwitch"!=SirvIconURL&&"giftwitch-overlay"!=SirvIconURL||(SirvIconURL=i+"?image.rules=R30L60R30&image.speed=1000&image.pause=3000"),$instance=Sirv.viewer.getInstance("#sirv-spin"),SirvSetActiveItem(i),jQuery(".MagicToolboxContainer").removeClass("no-thumbnails"),jQuery(".MagicToolboxSelectorsContainer").show(),jQuery(".MagicToolboxSlides .MagicToolboxSlides-arrow").show();var t=mtGetMaxSizes(),r=' <a class="'+e+'" data-slide-id="spin" href="#"><img alt="360 view" id="SirvIcon" style="display:none;" src="'+SirvIconURL+'"/></a>';0==jQuery(".MagicToolboxSelectorsContainer a").length?(jQuery(".MagicToolboxSlides .MagicToolboxSlides-arrow").hide(),jQuery(".MagicToolboxSelectorsContainer").append(r)):"last"==SirvSpinPosition?jQuery(".MagicToolboxSelectorsContainer a:last").after(r):"second"==SirvSpinPosition?jQuery(".MagicToolboxSelectorsContainer a:first").after(r):jQuery(".MagicToolboxSelectorsContainer a:first").before(r),jQuery(".MagicToolboxContainer").hasClass("layout-bottom")?jQuery("#SirvIcon").css("height",t.height+"px").show():jQuery("#SirvIcon").css("width",t.width+"px").show(),mtInitSelectors('.MagicToolboxSelectorsContainer a[data-slide-id="spin"]'),"first"==SirvSpinPosition&&(SirvVariants[currentVariantID]?(mtShowSirvVariant(currentVariantID),currentVariantID=0):jQuery('.MagicToolboxSelectorsContainer a[data-slide-id="spin"]').trigger("click")),0==jQuery(".MagicToolboxSelectorsContainer a").length&&(jQuery(".MagicToolboxContainer").addClass("no-thumbnails"),jQuery(".MagicToolboxSlides .MagicToolboxSlides-arrow, .MagicToolboxSelectorsContainer").hide(),jQuery('div[data-slide-id="zoom"]').removeClass("active-magic-slide"),jQuery('div[data-slide-id="spin"]').addClass("active-magic-slide"),Sirv.start()),initMagicScroll()}}function mtShowSirvVariant(i){0==jQuery("#SirvIcon").length&&(jQuery("#msc-selectors-container").length&&MagicScroll.stop(),mtInitSirvIcon(SirvVariants[i]));SirvMaxHeight>0&&SirvMaxHeight,Sirv.viewer.getInstance("#sirv-spin");var e=SirvVariants[i];SirvSetActiveItem(SirvVariants[i]),"gif"!=SirvIconURL_&&"gif-overlay"!=SirvIconURL_||(SirvIconURL=e+"?image"),"giftwitch"!=SirvIconURL_&&"giftwitch-overlay"!=SirvIconURL_||(SirvIconURL=e+"?image.rules=R30L60R30&image.speed=1000&image.pause=3000"),jQuery('a[data-slide-id="spin"] img').attr("src",SirvIconURL),"first"==SirvSpinPosition?jQuery('a[data-slide-id="spin"]').trigger("click"):jQuery("a.mz-thumb-selected").trigger("click")}function mtSwitchImage(i,e){var t=jQuery(".MagicToolboxContainer .active-magic-slide");"spin"==t.attr("data-slide-id")&&(t.removeClass("active-magic-slide"),jQuery('.MagicToolboxContainer .MagicToolboxSlide[data-slide-id="zoom"]').addClass("active-magic-slide")),0==jQuery(".mz-lens").length?(mtHighlightActiveSelector(),jQuery("a.MagicZoomPlus").attr("href",i),jQuery("a.MagicZoomPlus img").first().attr("src",e)):MagicZoom.update(jQuery("a.MagicZoomPlus").attr("id"),i,e)}function mtOnDomReady(i){if("undefined"!=typeof jQuery)jQuery(document).ready(i);else{if(window.MagicjQueryTries++,10==window.MagicjQueryTries){var e=document.createElement("script");e.type="text/javascript",e.async=!1,e.src="https://code.jquery.com/jquery-2.2.4.min.js",document.getElementsByTagName("script")[0].parentNode.appendChild(e)}setTimeout((function(){mtOnDomReady(i)}),250)}}function mtGetParameterByName(i,e){e||(e=window.location.href),i=i.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)").exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function mtGetVariantId(){var i=mtGetParameterByName("variant");if(!i&&"undefined"!=typeof mt_product&&mt_product.variants&&mt_product.variants.length>0)for(var e=0;e<mt_product.variants.length;e++)if(mt_product.variants[e].available){i=mt_product.variants[e].id;break}return i}function updateMZPGallery(i){var e=jQuery('a[data-variants*="'+i+'"]');if(e.length){e.show(),e.prevAll().hide();var t=!1;e.nextAll().each((function(){","!=jQuery(this).attr("data-variants")&&(t=!0),t?jQuery(this).hide():jQuery(this).show()})),jQuery('a[data-slide-id="spin"]').show()}}function initmzp(){jQuery("#admin_bar_iframe").length&&jQuery(document.body).append('<style type="text/css">.mz-zoom-window { margin-top: -'+jQuery("#admin_bar_iframe").height()+"px; </style>"),window.SirvIconURL_="undefined"!=typeof SirvIconURL?SirvIconURL:"",mtInitVideoSelectors(".MagicToolboxSelectorsContainer a"),mtInitSelectors(".MagicToolboxSelectorsContainer a");var i=jQuery('[data-slide-num="0"][data-video-url]');i.length&&(jQuery('a[data-slide-id="'+i.attr("data-slide-id")+'"]').trigger("click"),$firstImageIsVideo=!0),mtInitSirv(),mtInitArrows(),jQuery('form[action*="/cart/add"]').on("change",(function(){setTimeout((function(){var i=mtGetVariantId();if("undefined"!=typeof currentVariantID&&i!=currentVariantID){currentVariantID=i;var e=jQuery('a[data-variants*="'+i+'"]');"undefined"!=typeof MagicZoom&&e.length&&MagicZoom.update(e.closest(".MagicToolboxContainer").find(".MagicZoomPlus").attr("id"),e.attr("href"),e.attr("data-image")),"undefined"!=typeof SirvVariants&&void 0!==SirvVariants[i]&&"string"==typeof SirvVariants[i]?mtShowSirvVariant(i):e.trigger("click")}}),500)}))}mzOptions.onZoomReady=function(i){mtZoomIsReady=!0,$firstImageIsVideo||mtHighlightActiveSelector()},window.MagicjQueryTries=0,mtOnDomReady((function(){initmzp()}));
